<html>
<head><title>steemrewardship</title><link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="http://aschatria.github.io/assets/css/wshell.css">
  
  
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
<script type="text/javascript">

(function($){
	$.fn.textareaCounter = function(options) {
		// setting the defaults
		// $("textarea").textareaCounter({ limit: 100 });
		var defaults = {
			limit: 300
		};	
		var options = $.extend(defaults, options);
 
		// and the plugin begins
		return this.each(function() {
			var obj, text, wordcount, limited;
			
			obj = $(this);
			obj.after('<span style="font-size: 11px; clear: both; margin-top: 3px; display: block;" id="counter-text">Max. '+options.limit+' words</span>');

			obj.keyup(function() {
			    text = obj.val();
			    if(text === "") {
			    	wordcount = 0;
			    } else {
				    wordcount = $.trim(text).split(" ").length;
				}
			    if(wordcount > options.limit) {
			        $("#counter-text").html('<span style="color: #DD0000;">0 words left</span>');
					limited = $.trim(text).split(" ", options.limit);
					limited = limited.join(" ");
					$(this).val(limited);
			    } else {
			        $("#counter-text").html((options.limit - wordcount)+' words left');
			    } 
			});
		});
	};
})(jQuery);
</script>
  
  </head>

 <body>
   
    <!-- made based on steemwhales post page thanks to @heimindanger -->
<div class="container-fluid" style="background-color: #ffefdb;">
   
   
   <!-- Image and text -->
<nav class="navbar navbar-light" style="background-color:#ffec8b; justify-content-between">
  <span class="navbar-brand">
    rShell
  </span>
  <form class="form-inline" style="float:right;">
  
         
          <input id="author" name="author" type="text" placeholder="username" class="form-control input-md" required="">
         
    
          <input id="privatekey" name="privatekey" type="text" placeholder="Posting Key" class="form-control input-md" required="">
          
          <label control-label" for="privatekey">
            <button style="background:#ffd5c0!important;" type='button' id="addbenef" name="addbenef" class="btn btn-outline-success" data-toggle="modal" data-target="#benefModal"><span class="glyphicon glyphicon-piggy-bank" aria-hidden="true"></span> Add sponsor</button>
          </label>
          <div class="col">
          <ul id='beneflist'>
          </ul>
          </div>
        

  </form>
  
  
  
</nav>
   
      
  
          

  <div class="col" style=background:#1C252B;color:white;padding:10px;height:auto;width:30%;float:left;">
  <p>The posting key is not saved by this form and exists only in your browser untill you close this page.</p>
  <p>In order to be considered for an upvote you have to add our sponsor.</p>
  <p>Sponsor's Call% is how much they ask from your author reward in order to consider your post for their Upvote.</p>
  <p>Upvote is specified in an offer. </p>
   <p>Sponsor can upvote a limited number of submissions. </p>
       <hr/>                                                                                     
      <b>Requirements and posting:</b>       </br>
  1. Your post has to be original, no copy paste and written in good English.</br>
  2. Fill credentials, add sponsor and send content with this form.</br>
  3. Paste link in our Discord server.</br>                                                                                          
  Please, only one post in 24 hours is allowed.</br>
       <hr/>                                                                                     
  You can use this form w/o adding our sponsor for your own purposes.</br>
  Usage of this form is completely volontary.</br>
	You can edit this post additionally in Steemit.</br>
	Sponsors, main tag and reward options once set can't be changed.</br>																																													
				<hr/>
    <b>Markdown</b>                                                                                    
 
   <br/>Insert images with this code: <blockquote>![image name](link to image) </blockquote>   
   <br/>Insert link with this code: <blockquote> [link description](link) </blockquote>                                                                                            
     <hr/>
  DISCLAIMER: 
   We ( hosting party, github account holder and sponsor) won't be held responsible for any possible finantial loss by misuse of this form or failure to understand its purpose and settings. </br>
   Don't change settings if you don't know what they are for.  </br>                                                                                       
   By using this form you are in full compliance with this disclaimer.  </br> 
 <hr/>
Steemrewardship is organised by <a href="https://steemit.com/@steemrepair">@steemrepair</a> and administrated by <a href="https://steemit.com/@aschatria">@aschatria</a> 

  </div>
  
         
  
  <div class="col-6" style="padding:10px;width:64%;float:right;">
  
  <form class="form-horizontal" id='post'>
        <fieldset>

        <!-- Form Name -->
        <center><legend>Post content on STEEM</legend></center>
           

        <!-- Text input-->
        <div class="form-group">
          <label class="col control-label" for="title">Title<span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></label>  
          <div class="col">
          <input id="title" name="title" type="text" placeholder="Write your title here" class="form-control input-md" required="">
          </div>
        </div>

        <!-- Text input-->
        <div class="form-group">
          <label class="col control-label" for="permlink">Link<span class="glyphicon glyphicon-link" aria-hidden="true"></span></label>  
          <div class="col">
          <input id="permlink" name="permlink" type="text" placeholder="Link will be auto-aded when you write title" class="form-control input-md" required="">
          </div>
        </div>
          
          
          
          <!-- Textarea -->
        <div class="form-group">
          <label class="col control-label" for="cover">Cover image<span class="glyphicon glyphicon-picture" aria-hidden="true"></span></label>
          <div class="col">
            <input id="cover" name="cover" type="text" placeholder="Paste URL of your cover image or YouTube video" class="form-control input-md" required="">
          </div>
        </div>  
          
          

        <!-- Textarea -->
        <div class="form-group">
          <label class="col control-label" for="markdown">Content, 200-300 words. <span class="glyphicon glyphicon-file" aria-hidden="true"></span></label>
          <div class="col">
            <textarea class="form-control" id="markdown" name="markdown" rows='12'></textarea>
            <script type="text/javascript">
	$("textarea").textareaCounter();
	</script>
            
          </div>
        </div>
          <hr/>
          
        <!-- Textarea -->
        <div class="form-group">
          <label class="col control-label" for="branding">Branding<span class="glyphicon glyphicon-certificate" aria-hidden="true"></span></label>
          <div class="col">
            
            <textarea class="form-control" id="branding" name="branding" rows='4' placeholder="Paste codes for banners and your footer"></textarea>
            
          </div>
        </div>  
          
   <hr/>    
          <center><h3>Payout</h3></center>
          
<span class="help-block">You will get <span id='weightRemaining'>100</span>% of the rewards</span> 
          
          
        <!-- Text input-->
      <div class="form-group">
          <label class="col-md-4 control-label" for="sbdpercent">Steem Dollars %</label>  
          <div class="col-md-4">
          <input id="sbdpercent" name="sbdpercent" type="number" placeholder="" class="form-control input-md" required="" min='0' max='100' value='100' step='0.01'>
          <span class="help-block">Set to 0% if you want to power up all your rewards</span> 
           <span class="help-block">Leave as it is to receive a full reward.</span>                        
          </div>
        </div>



        <!-- Text input-->
      <div class="form-group">
          <label class="col-md-4 control-label" for="maxpayout">Max Accepted SBD Payout</label>  
          <div class="col-md-4">
          <input id="maxpayout" name="maxpayout" type="number" placeholder="" class="form-control input-md" required="" min='0' max='1000000' value='1000000' step='1'>
          <span class="help-block">Set to 0 if you want to decline payout</span>
     <span class="help-block">Leave as it is if you want to receive full payout. </span> 
          </div>
        </div>

        <!-- Button -->
        <div class="form-group">
          <label class="col-md-4 control-label" for="post"></label>
          <div class="col-md-4">
            <button style="background:#ffd5c0!important;color:black;" id="post" name="post" class="btn btn-primary"><span class="glyphicon glyphicon-fire" aria-hidden="true"></span>SEND</button>
          </div>
        </div>

        </fieldset>
      </form>
    
    
 
     
     <center><img src="https://i.imgur.com/A01eQzv.png"/><br/>
     <a href="https://discord.gg/FqpQ7AV">https://discord.gg/FqpQ7AV</a> </center>                                         
            
  </div>

 

      <!-- Modal -->
      <div class="modal fade" id="benefModal" role="dialog">
        <div class="modal-dialog">
        
          <!-- Modal content-->
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal">&times;</button>
              <h4 class="modal-title">Add Sponsor</h4>
            </div>
            <div class="modal-body">
              
            <ul> List of sponsors:
             <li> monajam - call: 5% - upvote: 5-10%
                                   </li>
                                   
                                   </ul>
              
              <hr/>
             
              
              
              <form class="form-horizontal" id='post'>
                <fieldset>


                <!-- Text input-->
                <div class="form-group">
                  <label class="col-md-4 control-label" for="benefusername">Sponsor</label>  
                  <div class="col-md-4">
                  <input id="benefusername" name="benefusername" type="text" placeholder="" class="form-control input-md" required="" value='monajam'>
                  <span class="help-block"></span>  
                  </div>
                </div><br/>

                <!-- Text input-->
                <div class="form-group">
                  <label class="col-md-4 control-label" for="benefshare">Call %</label>  
                  <div class="col-md-4">
                  <input id="benefshare" name="benefshare" type="number" placeholder="" class="form-control input-md" required="" min='0' max='100' value='5' step='0.01'>
                  <span class="help-block"></span>  
                  </div>
                </div>

                </fieldset>
              </form>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-success" data-dismiss="modal" id='benefadd'>Add</button>
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>
                                                                                
         <div class="alert alert-primary" role="alert">                                                                       
      <div id='successalert' class="alert alert-success" style='display:none'>
        <strong>Success!</strong> Your post is now public on the blockchain.
      </div>

      <div id='infoalert' class="alert alert-info" style='display:none'>
        <strong>Please wait</strong> Submitting your post...
      </div>

      <div id='erroralert' class="alert alert-danger" style='display:none'>
        <strong>Error!</strong> <span id='errormessage'></span>
      </div>
    </div>
     </div>                                                
                                                     
  
  
  
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
  <script src="http://aschatria.github.io/assets/js/jquery.query-object.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
   <script src="https://cdn.steemjs.com/lib/latest/steem.min.js"></script>
  
  
  
  
  </script>
    <script type="text/javascript">
      beneficiaries = []
      weightRemaining = 10000
      tags = []

      $('#title').keydown(function() {
        var permlink = $(this).val().toLowerCase()
          .replace(/ /g,'-')
          .replace(/[^\w-]+/g,'')
        $('#permlink').val(permlink)
      })

      $('#tags').keydown(function() {
        tags = $(this).val().split(' ')
      })

      $('#benefadd').click(function() {
        for (var i = beneficiaries.length - 1; i >= 0; i--) {
          if (beneficiaries[i].account == $('#benefusername').val()) {
            weightRemaining += beneficiaries[i].weight;
            beneficiaries.splice(i,1);
          }
        };
        beneficiaries.push({
          account: $('#benefusername').val(),
          weight: 100*$('#benefshare').val()
        })
        weightRemaining -= 100*$('#benefshare').val()
        displayBenefs()
      })

      function displayBenefs() {
        $('#beneflist').empty()
        for (var i = beneficiaries.length - 1; i >= 0; i--) {
          var html = '<li>'+beneficiaries[i].account+' ('+beneficiaries[i].weight/100+'%) <button type="button" class="btn btn-danger btn-xs removeBenef" data-account="'+beneficiaries[i].account+'">x</button></li>'
          $('#beneflist').append(html)
        };
        $('#weightRemaining')[0].innerHTML = weightRemaining/100;
        $('.removeBenef').click(function(e) {
          console.log($(this).data('account'))
          for (var i = beneficiaries.length - 1; i >= 0; i--) {
            if (beneficiaries[i].account == $(this).data('account')) {
              weightRemaining += beneficiaries[i].weight;
              beneficiaries.splice(i,1);
              displayBenefs()
            }
          };
        })
      }

      $('#post').submit(function(event) {
        event.preventDefault();
        $('#infoalert').show()
        $('#successalert').hide()
        $('#erroralert').hide()
        var title = $('#title').val();
        var permlink = $('#permlink').val();
        var markdown = $('#cover').val() + '<hr/>' + $('#markdown').val() + '<hr/>' + $('#branding').val() + '<hr/><center><img src="https://i.imgur.com/F7QtaKH.png"/><br/><b>This is posted using SteemRewardShip app.</b><br/>#steemrewardship is organised by @steemrepair<br/><a href="https://aschatria.github.io/steem/steemrewardship.html">Website- Learn More</a><br/><a href="https://discord.gg/NAancrq">Discord server - Join Us</a></center><hr/>';
        var author = $('#author').val();
        var privatekey = $('#privatekey').val();
        var sbdpercent = 100*$('#sbdpercent').val();
        var maxpayout = parseInt($('#maxpayout').val());

        var operations = [
          ['comment',
            {
              parent_author: '',
              parent_permlink: 'steemrewardship',
              author: author,
              permlink: permlink,
              title: title,
              body: markdown,
              json_metadata : JSON.stringify({
                tags: ['blog', 'writing', 'knowledge', 'competition'],
                app: 'steemrewardship'
              })
            }
          ],
          ['comment_options', {
            author: author,
            permlink: permlink,
            max_accepted_payout: maxpayout+'.000 SBD',
            percent_steem_dollars: sbdpercent,
            allow_votes: true,
            allow_curation_rewards: true,
            extensions: [
              [0, {
                beneficiaries: beneficiaries
              }]
            ]
          }]
        ];

        if (beneficiaries.length == 0) {
          operations[1][1].extensions = []
        }

        console.log(operations)
        steem.broadcast.send(
          { operations: operations, extensions: [] },
          { posting: privatekey },
          function(e, r) {
            $('#infoalert').hide()
            if (e) {
              $('#errormessage').html(e.message)
              $('#erroralert').show()
            } else {
              $('#successalert').show()
            }
            console.log(e,r)
          }
        )
      });
    </script>

  
  


</body>
</html>
